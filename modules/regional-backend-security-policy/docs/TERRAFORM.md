<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| terraform | >= 1.10 |
| google | >= 6.14, < 8 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| cloud_armor_policy | GoogleCloudPlatform/cloud-armor/google//modules/regional-backend-security-policy | ~> 6.0 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| project_id | Google Cloud project ID. | `string` | n/a | yes |
| region | Region in which security policy is created | `string` | n/a | yes |
| automatic_service_enablement | Controls service enablement behaviour of the module. If set to false, the module will not enabled needed APIs. | `bool` | `true` | no |
| custom_rules | A map of rules which should be added on top of the rules provided by the<br/>baseline. The key of the map specifies the name of the rule. The<br/>description of this object can be found in the upstream Cloud Armor<br/>[module documentation](https://registry.terraform.io/modules/GoogleCloudPlatform/cloud-armor/google/latest). | <pre>map(object({<br/>    action                            = string<br/>    priority                          = number<br/>    description                       = optional(string)<br/>    preview                           = optional(bool, false)<br/>    expression                        = string<br/>    recaptcha_action_token_site_keys  = optional(list(string))<br/>    recaptcha_session_token_site_keys = optional(list(string))<br/>    redirect_type                     = optional(string, null)<br/>    redirect_target                   = optional(string, null)<br/>    rate_limit_options = optional(object({<br/>      enforce_on_key      = optional(string)<br/>      enforce_on_key_name = optional(string)<br/>      enforce_on_key_configs = optional(list(object({<br/>        enforce_on_key_name = optional(string)<br/>        enforce_on_key_type = optional(string)<br/>      })))<br/>      exceed_action                        = optional(string)<br/>      rate_limit_http_request_count        = optional(number)<br/>      rate_limit_http_request_interval_sec = optional(number)<br/>      ban_duration_sec                     = optional(number)<br/>      ban_http_request_count               = optional(number)<br/>      ban_http_request_interval_sec        = optional(number)<br/>      }),<br/>    {})<br/>    header_action = optional(list(object({<br/>      header_name  = optional(string)<br/>      header_value = optional(string)<br/>    })), [])<br/><br/>    preconfigured_waf_config_exclusions = optional(map(object({<br/>      target_rule_set = string<br/>      target_rule_ids = optional(list(string), [])<br/>      request_header = optional(list(object({<br/>        operator = string<br/>        value    = optional(string)<br/>      })))<br/>      request_cookie = optional(list(object({<br/>        operator = string<br/>        value    = optional(string)<br/>      })))<br/>      request_uri = optional(list(object({<br/>        operator = string<br/>        value    = optional(string)<br/>      })))<br/>      request_query_param = optional(list(object({<br/>        operator = string<br/>        value    = optional(string)<br/>      })))<br/>    })), null)<br/><br/>  }))</pre> | `{}` | no |
| description | Description of the Cloud Armor security policy. | `string` | `"METRO Baseline Security Policy"` | no |
| name | Name of the Cloud Armor security policy. | `string` | `"metro-baseline"` | no |
| pre_configured_rules_overwrites | Values to overwrite the default pre-configured rules provided by the<br/>baseline. Be aware that deviating from the baseline could reduce the<br/>effectiveness of the security policy and lead to security violation<br/>findings. The description of this object can be found in the upstream<br/>Cloud Armor [module documentation](https://registry.terraform.io/modules/GoogleCloudPlatform/cloud-armor/google/latest) | <pre>map(object({<br/>    enable                  = optional(bool)<br/>    action                  = optional(string)<br/>    priority                = optional(number)<br/>    description             = optional(string)<br/>    preview                 = optional(bool)<br/>    redirect_type           = optional(string)<br/>    redirect_target         = optional(string)<br/>    target_rule_set         = optional(string)<br/>    sensitivity_level       = optional(number)<br/>    include_target_rule_ids = optional(list(string), [])<br/>    exclude_target_rule_ids = optional(list(string), [])<br/>    rate_limit_options = optional(object({<br/>      enforce_on_key      = optional(string)<br/>      enforce_on_key_name = optional(string)<br/>      enforce_on_key_configs = optional(list(object({<br/>        enforce_on_key_name = optional(string)<br/>        enforce_on_key_type = optional(string)<br/>      })))<br/>      exceed_action                        = optional(string)<br/>      rate_limit_http_request_count        = optional(number)<br/>      rate_limit_http_request_interval_sec = optional(number)<br/>      ban_duration_sec                     = optional(number)<br/>      ban_http_request_count               = optional(number)<br/>      ban_http_request_interval_sec        = optional(number)<br/>    }), {})<br/><br/>    header_action = optional(list(object({<br/>      header_name  = optional(string)<br/>      header_value = optional(string)<br/>    })), [])<br/><br/>    preconfigured_waf_config_exclusions = optional(map(object({<br/>      target_rule_set = string<br/>      target_rule_ids = optional(list(string), [])<br/>      request_header = optional(list(object({<br/>        operator = string<br/>        value    = optional(string)<br/>      })))<br/>      request_cookie = optional(list(object({<br/>        operator = string<br/>        value    = optional(string)<br/>      })))<br/>      request_uri = optional(list(object({<br/>        operator = string<br/>        value    = optional(string)<br/>      })))<br/>      request_query_param = optional(list(object({<br/>        operator = string<br/>        value    = optional(string)<br/>      })))<br/>    })), null)<br/><br/>  }))</pre> | `{}` | no |
| security_rules | A map of security rules which should be added on top of the rules provided<br/>by the baseline. A security rule allows you to match traffic against IP<br/>CIDR ranges. The key of the map specifies the name of the rule. The<br/>description of this object can be found in the upstream Cloud Armor<br/>[module documentation](https://registry.terraform.io/modules/GoogleCloudPlatform/cloud-armor/google/latest). | <pre>map(object({<br/>    action          = string<br/>    priority        = number<br/>    description     = optional(string)<br/>    preview         = optional(bool, false)<br/>    redirect_type   = optional(string, null)<br/>    redirect_target = optional(string, null)<br/>    src_ip_ranges   = list(string)<br/>    rate_limit_options = optional(object({<br/>      enforce_on_key      = optional(string)<br/>      enforce_on_key_name = optional(string)<br/>      enforce_on_key_configs = optional(list(object({<br/>        enforce_on_key_name = optional(string)<br/>        enforce_on_key_type = optional(string)<br/>      })))<br/>      exceed_action                        = optional(string)<br/>      rate_limit_http_request_count        = optional(number)<br/>      rate_limit_http_request_interval_sec = optional(number)<br/>      ban_duration_sec                     = optional(number)<br/>      ban_http_request_count               = optional(number)<br/>      ban_http_request_interval_sec        = optional(number)<br/>    }), {})<br/>    header_action = optional(list(object({<br/>      header_name  = optional(string)<br/>      header_value = optional(string)<br/>    })), [])<br/>  }))</pre> | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| policy | Security policy created |
<!-- END_TF_DOCS -->
